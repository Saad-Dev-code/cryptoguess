<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head(title)">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#0f1226">
  <title th:text="${title}">Crypto Guess</title>

  <!-- Modern font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/styles.css}">
  <script defer th:src="@{/js/app.js}"></script>
</head>

<body th:fragment="topnav">
<header class="nav glass">
  <a class="brand" th:href="@{/}">ðŸ§  Crypto Guess</a>
  <div class="spacer"></div>
  <div class="session">
    <span th:if="${session != null and session.username != null}">
      <span class="hi">Hi, <b th:text="${session.username}">User</b></span>
      <span class="dot"></span>
      <span>Score: <b th:text="${session.score}">0</b></span>
      <span class="dot"></span>
      <span class="badges">
        <span th:if="${#lists.isEmpty(session.badges)}" class="muted">No badges yet</span>
        <span th:each="b : ${session.badges}" class="badge" th:text="${b.label}">Badge</span>
      </span>
    </span>
    <form th:if="${session != null and session.username != null}" method="post" th:action="@{/logout}">
      <button class="link">Logout</button>
    </form>
  </div>
</header>
</body>
<!-- Score HUD fragment -->
<div th:fragment="scoreHud"
     class="score-hud glass fade-up" style="--i:0">
  <div class="hud-left">
    <div class="hud-score">
      <span class="hud-label">Score</span>
      <span class="hud-value" th:text="${score}">0</span>
    </div>
    <div class="hud-badge">
      <span class="hud-label">Badge</span>
      <span class="badge" th:if="${currentBadge != null}" th:text="${currentBadge.label}">â€”</span>
      <span class="muted" th:if="${currentBadge == null}">â€”</span>
    </div>
  </div>

  <div class="hud-right">
    <div class="hud-progress-row">
      <span class="hud-label" th:if="${nextBadge != null}">
        Next: <b th:text="${nextBadge.label}">Badge</b>
      </span>
      <span class="hud-label muted" th:if="${nextBadge == null}">
        Max badge reached ðŸŽ‰
      </span>
      <span class="hud-remaining" th:if="${nextBadge != null}">
        <span th:text="${remaining}">0</span> to go
      </span>
    </div>
    <div class="hud-progress">
      <div class="hud-bar">
        <div class="hud-fill" th:style="'width:' + ${progressPct} + '%'"></div>
      </div>
      <div class="hud-pct" th:text="${progressPct} + '%'">0%</div>
    </div>
  </div>
</div>

</html>
